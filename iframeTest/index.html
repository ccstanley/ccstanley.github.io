<!DOCTYPE html>
<html>
<head>
	<title>My App</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1">
	<!-- KaiPublisherId is optional, we're utilizing manifestURL at this moment -->
	<!-- <script>KaiPublisherId = 'pid'</script> -->
	<style>*:focus{border:1px solid blue;}</style>
	<!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>-->
		        <!--
	iframe origin: <div id="origin"></div>
	<div id="jqueryTest">jQuery is not running.</div>
        Javascript to execute: <textarea id="jstext" cols="30" rows="10">alert('abc')</textarea>
	
        <button id="send" onclick="postJS()">Send</button>
        <script type="text/javascript">
            document.getElementById("origin").textContent = document.domain;
            function postJS() {
                window.parent.postMessage(document.getElementById('jstext').value, "*");
            }
            postJS();
	    $(document).ready(function() {
	    	$("#jqueryTest").text("jQuery is running fine.");
	    })
        </script>
	-->
		<script type="text/javascript">
			/*
			window.addEventListener("blur", function( event ) {
    const iframe = document.createElement('iframe')
    iframe.src = 'https://header.kaios-analytics.com/?iframe.blur'
    document.body.appendChild(iframe)
})
 

window.addEventListener("focus", function( event ) {
    const iframe = document.createElement('iframe')
    iframe.src = 'https://header.kaios-analytics.com/?iframe.focus'
    document.body.appendChild(iframe)
})

document.addEventListener('DOMContentLoaded', function () {
    const fr = document.createElement('iframe')
    fr.src = 'https://header.kaios-analytics.com/?iframe.start'
    document.body.appendChild(fr)
})
*/
console.log('Log within iframe');
const getManifestUrl = () => {
        return new Promise(resolve => {
            if (!navigator.mozApps || !navigator.mozApps.getSelf) {
                resolve()
            } else {
                const self = navigator.mozApps.getSelf()
                self.onsuccess = (e) => {
                    if (e && e.target && e.target.result) {
                        console.log('IN IFRAME', e.target.result.manifestURL)
                    }
                }
            }
        })
    }
getManifestUrl();
			
// 		function add(){ document.body.textContent = parseInt(document.body.textContext) + 1; }
// 		setInterval(add, 1000);
// window.addEventListener("blur", function( event ) {
//     const img = new Image(1,1)
//     img.src = 'https://header.kaios-analytics.com/?iframe.blur'
//     document.body.appendChild(img)
// })
 

// window.addEventListener("focus", function( event ) {
//     const img = new Image(1,1)
//     img.src = 'https://header.kaios-analytics.com/?iframe.focus'
//     document.body.appendChild(img)
// })
	</script>
</head>
<body>1</body>

</html>
